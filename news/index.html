<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog ‚Ä¢ EpiNow2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://epiforecasts.io/EpiNow2/reference/figures/unnamed-chunk-14-1.png"><meta property="og:image:alt" content="Example estimates produced by EpiNow2 of the reproduction number, cases by date of infection and cases by date of report"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@epiforecasts"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EpiNow2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/EpiNow2.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-model-definitions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Model definitions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-model-definitions"><li><a class="dropdown-item" href="../articles/estimate_infections.html">estimate_infections()</a></li>
    <li><a class="dropdown-item" href="../articles/estimate_secondary.html">estimate_secondary()</a></li>
    <li><a class="dropdown-item" href="../articles/estimate_truncation.html">estimate_truncation()</a></li>
    <li><a class="dropdown-item" href="../articles/gaussian_process_implementation_details.html">Gaussian Process implementation details</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-usage" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Usage</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-usage"><li><a class="dropdown-item" href="../articles/estimate_infections_workflow.html">Workflow for Rt estimation and forecasting</a></li>
    <li><a class="dropdown-item" href="../articles/estimate_infections_options.html">Examples: estimate_infections()</a></li>
    <li><a class="dropdown-item" href="../articles/epinow.html">Using epinow() for running in production mode</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-case-studies" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Case studies</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-case-studies"><li><a class="dropdown-item" href="../articles/case-studies.html">External case studies and use in the literature</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiforecasts/EpiNow2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/epiforecasts/EpiNow2/blob/v1.6.1/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.6.1" id="epinow2-161">EpiNow2 1.6.1<a class="anchor" aria-label="anchor" href="#epinow2-161"></a></h2><p class="text-muted">CRAN release: 2024-10-31</p>
<div class="section level3">
<h3 id="model-changes-1-6-1">Model changes<a class="anchor" aria-label="anchor" href="#model-changes-1-6-1"></a></h3>
<ul><li>A bug in the spectral densities of Matern kernels of order other than 3/2 has been fixed and the vignette updated accordingly. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/835" class="external-link">#835</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Changed the prior on the (square root of the) magnitude alpha of the Gaussian Process back to HalfNormal(0, 0.05) based on user feedback of unexpected results. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/840" class="external-link">#840</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="package-changes-1-6-1">Package changes<a class="anchor" aria-label="anchor" href="#package-changes-1-6-1"></a></h3>
<ul><li>Users are now informed that <code>NA</code> observations (if present implicitly or explicitly) will be treated as missing instead of zero when using the default <code><a href="../reference/obs_opts.html">obs_opts()</a></code>. Options to treat <code>NA</code> as zeros or accumulate them are also provided in the message. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/774" class="external-link">#774</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.6.0" id="epinow2-160">EpiNow2 1.6.0<a class="anchor" aria-label="anchor" href="#epinow2-160"></a></h2><p class="text-muted">CRAN release: 2024-10-02</p>
<p>A release that introduces model improvements to the Gaussian Process models, alongside a number of other improvements and bug fixes.</p>
<div class="section level3">
<h3 id="documentation-1-6-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-6-0"></a></h3>
<ul><li>The documentation of the <code>rt</code> argument has been expanded in the case where <code>rt = NULL</code> to make explicit the settings that are applied in that case. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/779" class="external-link">#779</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>The README has been updated to link to the free course on nowcasting and forecasting. The availability of variational inference, Laplace approximation, and Pathfinder through <code>cmdstanr</code> has also be surfaced. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/753" class="external-link">#753</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Some implicit argument defaults have been made explicit in the function definition. By <a href="https://github.com/Bisaloo" class="external-link">@Bisaloo</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/729" class="external-link">#729</a>.</li>
<li>The installation guide in the README has been updated to provide instructions for configuring the C toolchain of Windows, MacOS, and Linux. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/707" class="external-link">#707</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="model-changes-1-6-0">Model changes<a class="anchor" aria-label="anchor" href="#model-changes-1-6-0"></a></h3>
<ul><li>The interface for defining delay distributions has been generalised to also cater for continuous distributions</li>
<li>When defining probability distributions these can now be truncated using the <code>tolerance</code> argument</li>
<li>Ornstein-Uhlenbeck and 5 / 2 Mat√©rn kernels have been added. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/741" class="external-link">#741</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Gaussian processes have been vectorised, leading to some speed gains üöÄ , and the <code><a href="../reference/gp_opts.html">gp_opts()</a></code> function has gained three more options, ‚Äúperiodic‚Äù, ‚Äúou‚Äù, and ‚Äúse‚Äù, to specify periodic and linear kernels respectively. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/742" class="external-link">#742</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Prior predictive checks have been used to update the following priors: the prior on the magnitude of the Gaussian process (from HalfNormal(0, 0.05)^2 to HalfNormal(0, 0.01)^2), and the prior on the overdispersion (from 1 / HalfNormal(0, 1)^2 to 1 / HalfNormal(0, 0.25)). In the user-facing API, this is a change in default values of the <code>sd</code> of <code>phi</code> in <code><a href="../reference/obs_opts.html">obs_opts()</a></code> from 1 to 0.25. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/742" class="external-link">#742</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>The default stan control options have been updated from <code>list(adapt_delta = 0.95, max_treedepth = 15)</code> to <code>list(adapt_delta = 0.9, max_treedepth = 12)</code> due to improved performance and to reduce the runtime of the default parameterisations. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/742" class="external-link">#742</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Initialisation has been simplified by sampling directly from the priors, where possible, rather than from a constrained space. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/742" class="external-link">#742</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Unnecessary normalisation of delay priors has been removed. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/742" class="external-link">#742</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Ornstein-Uhlenbeck and 5 / 2 Mat√©rn kernels have been added. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/741" class="external-link">#741</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Switch to broadcasting from random walks and added unit tests. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/747" class="external-link">#747</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Optimised convolution code to take into account the relative length of the vectors being convolved. See <a href="https://github.com/epiforecasts/EpiNow2/issues/745" class="external-link">#745</a> by <a href="https://github.com/seabbs" class="external-link">@seabbs</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Switch to broadcasting the day of the week effect. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/746" class="external-link">#746</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>A warning is now thrown if nonparametric PMFs passed to delay options have consecutive tail values that are below a certain low threshold as these lead to loss in speed with little gain in accuracy. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/752" class="external-link">#752</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>, with a subsequent bug fix in <a href="https://github.com/epiforecasts/EpiNow2/issues/802" class="external-link">#802</a>.</li>
<li>
<code><a href="../reference/dist_fit.html">dist_fit()</a></code> can now accept any number of <code>samples</code> without throwing a warning when <code>samples</code> &lt; 1000 in <a href="https://github.com/epiforecasts/EpiNow2/issues/751" class="external-link">#751</a> by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a> and <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="package-changes-1-6-0">Package changes<a class="anchor" aria-label="anchor" href="#package-changes-1-6-0"></a></h3>
<ul><li>
<code><a href="../reference/epinow.html">epinow()</a></code> now returns the ‚Äútiming‚Äù output in a ‚Äútime difference‚Äù‚Äù format that is easier to understand and work with. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/688" class="external-link">#688</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>All functions now use the <a href="https://cli.r-lib.org" class="external-link">cli</a> R package to signal errors, warnings, and messages. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/762" class="external-link">#762</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>
<code><a href="../reference/fix_dist.html">fix_dist()</a></code> has been renamed to <code><a href="../reference/fix_parameters.html">fix_parameters()</a></code> because it removes the uncertainty in a distribution‚Äôs parameters. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/733" class="external-link">#733</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>
<code>plot.dist_spec</code> now uses color instead of line types to display pmfs vs cmfs. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/788" class="external-link">#788</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>The use of the <a href="https://progressr.futureverse.org" class="external-link">progressr</a> package for displaying progress bars is now optional, as is the use of <a href="https://future.futureverse.org" class="external-link">future</a> and <a href="https://future.apply.futureverse.org" class="external-link">future.apply</a> for parallelisation. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/798" class="external-link">#798</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Specifying nonparametric generation time intervals with a nonzero first element (corresponding to the zero bin) is being deprecated as the current behaviour of setting it to zero internally was not well exposed. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in #.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-6-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-6-0"></a></h3>
<ul><li>a bug was fixed that caused delay option functions to report an error if only the CDF cutoff was specified. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/716" class="external-link">#716</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>a bug was fixed where <code><a href="../reference/forecast_secondary.html">forecast_secondary()</a></code> did not work with fixed delays. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/717" class="external-link">#717</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>a bug was fixed that caused delay option functions to report an error if only the CDF cutoff was specified. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>a bug was fixed that led to the truncation PMF being shortened from the wrong side when the truncation PMF was longer than the supplied data. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/736" class="external-link">#736</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> and <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>a bug was fixed that caused internal validation checks on delay distributions to fail if they contained non-parametric distributions. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/750" class="external-link">#750</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>a bug was fixed where combined distributions where shown in alphabetical order, rather than the order in which they were combined. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/784" class="external-link">#784</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-6-0-1">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-6-0-1"></a></h3>
<ul><li>Updated the documentation of the dots argument of the <code><a href="../reference/stan_sampling_opts.html">stan_sampling_opts()</a></code> to add that the dots are passed to <code><a href="https://mc-stan.org/cmdstanr/reference/model-method-sample.html" class="external-link">cmdstanr::sample()</a></code>. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/699" class="external-link">#699</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>
<code><a href="../reference/generation_time_opts.html">generation_time_opts()</a></code> has been shortened to <code><a href="../reference/generation_time_opts.html">gt_opts()</a></code> to make it easier to specify. Calls to both functions are equivalent. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/698" class="external-link">#698</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a> and <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> .</li>
<li>Added stan documentation for <code>update_rt()</code>. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/747" class="external-link">#747</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.5.2" id="epinow2-152">EpiNow2 1.5.2<a class="anchor" aria-label="anchor" href="#epinow2-152"></a></h2><p class="text-muted">CRAN release: 2024-05-16</p>
<p>A patch release to further fix an issue with the date in the package citation. This has now been addressed by removing <code>inst/CITATION</code>.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.5.1" id="epinow2-151">EpiNow2 1.5.1<a class="anchor" aria-label="anchor" href="#epinow2-151"></a></h2><p class="text-muted">CRAN release: 2024-05-14</p>
<p>A patch release to fix an issue with the date in the package citation.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.5.0" id="epinow2-150">EpiNow2 1.5.0<a class="anchor" aria-label="anchor" href="#epinow2-150"></a></h2><p class="text-muted">CRAN release: 2024-05-10</p>
<p>This release comes with a change of maintainer, from <a href="https://github.com/seabbs" class="external-link">@seabbs</a> to <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>. This is to reflect who will handle the upcoming CRAN submission, but is not expected to lead to a change in workflows.</p>
<div class="section level3">
<h3 id="major-changes-1-5-0">Major changes<a class="anchor" aria-label="anchor" href="#major-changes-1-5-0"></a></h3>
<ul><li>The interface to generating delay distributions has been completely overhauled. Instead of calling <code><a href="../reference/dist_spec.html">dist_spec()</a></code> users now specify distributions using functions that represent the available distributions, i.e.¬†<code><a href="../reference/Distributions.html">LogNormal()</a></code>, <code><a href="../reference/Distributions.html">Gamma()</a></code> and <code><a href="../reference/Distributions.html">Fixed()</a></code>. See <code><a href="../reference/Distributions.html">?EpiNow2::Distributions</a></code>. Uncertainty is specified using calls of the same nature, to <code><a href="../reference/Distributions.html">Normal()</a></code>. More information on the underlying design can be found in <code>inst/dev/design_dist.md</code> By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/504" class="external-link">#504</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Delay discretisation is now based on a two-day censoring window (with uniform probability in between), based on recommendations in <a href="https://doi.org/10.1101/2024.01.12.24301247" class="external-link">Park et al, medRxiv, 2024</a>. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/518" class="external-link">#518</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="deprecations-1-5-0">Deprecations<a class="anchor" aria-label="anchor" href="#deprecations-1-5-0"></a></h3>
<ul><li>The functions <code><a href="../reference/sample_approx_dist.html">sample_approx_dist()</a></code>, <code><a href="../reference/report_cases.html">report_cases()</a></code>, and <code>adjust_infection_reports()</code> have been deprecated as the functionality they provide can now be achieved with <code><a href="../reference/simulate_secondary.html">simulate_secondary()</a></code>. See <a href="https://github.com/epiforecasts/EpiNow2/issues/597" class="external-link">#597</a> by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>The utility function <code>update_list()</code> has been deprecated in favour of <code><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">utils::modifyList()</a></code> because it comes with an installation of R. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/491" class="external-link">#491</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>The <code>fixed</code> argument to <code>dist_spec</code> has been deprecated and replaced by a <code><a href="../reference/fix_dist.html">fix_dist()</a></code> function. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/503" class="external-link">#503</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>The functions <code><a href="../reference/get_dist.html">get_dist()</a></code>, <code><a href="../reference/get_generation_time.html">get_generation_time()</a></code>, <code><a href="../reference/get_incubation_period.html">get_incubation_period()</a></code> have been deprecated and replaced with examples. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/481" class="external-link">#481</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>The function <code><a href="../reference/init_cumulative_fit.html">init_cumulative_fit()</a></code> has been deprecated. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/541" class="external-link">#541</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>The model-specific <code>weigh_delay_priors</code> argument has been deprecated in favour of delay-specific prior weighting using <code>weight_priors</code>. See <code><a href="../reference/generation_time_opts.html">generation_time_opts()</a></code>, <code><a href="../reference/delay_opts.html">delay_opts()</a></code>, and <code><a href="../reference/trunc_opts.html">trunc_opts()</a></code>. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/630" class="external-link">#630</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>All functions now use a <code>data</code> argument to pass data. The existing <code>reported_cases</code>, <code>reports</code>, and <code>obs</code> arguments are deprecated and will be removed in v2.0.0. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/638" class="external-link">#638</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="other-breaking-changes-1-5-0">Other breaking changes<a class="anchor" aria-label="anchor" href="#other-breaking-changes-1-5-0"></a></h3>
<ul><li>Updated <code><a href="../reference/estimate_infections.html">estimate_infections()</a></code> so that rather than imputing missing data, it now skips these data points in the likelihood. This is a breaking change as it alters the behaviour of the model when dates are missing from a time series but are known to be zero. We recommend that users check their results when updating to this version but expect this to in most cases improve performance. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/528" class="external-link">#528</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>
<code>simulate_infections</code> has been renamed to <code>forecast_infections</code> in line with <code>simulate_secondary</code> and <code>forecast_secondary</code>. The terminology is: a forecast is done from a fit to existing data, a simulation from first principles. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/544" class="external-link">#544</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>A new <code>simulate_infections</code> function has been added that can be used to simulate from the model from given initial conditions and parameters. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/557" class="external-link">#557</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>The function <code><a href="../reference/init_cumulative_fit.html">init_cumulative_fit()</a></code> has been deprecated. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/541" class="external-link">#541</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>The interface to generating delay distributions has been completely overhauled. Instead of calling <code><a href="../reference/dist_spec.html">dist_spec()</a></code> users now specify distributions using functions that represent the available distributions, i.e.¬†<code><a href="../reference/Distributions.html">LogNormal()</a></code>, <code><a href="../reference/Distributions.html">Gamma()</a></code> and <code><a href="../reference/Distributions.html">Fixed()</a></code>. Uncertainty is specified using calls of the same nature, to <code><a href="../reference/Distributions.html">Normal()</a></code>. More information on the underlying design can be found in <code>inst/dev/design_dist.md</code> By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/504" class="external-link">#504</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>The accessor functions <code><a href="../reference/get_parameters.html">get_parameters()</a></code>, <code><a href="../reference/get_pmf.html">get_pmf()</a></code>, and <code><a href="../reference/get_distribution.html">get_distribution()</a></code> have been added to extract elements of a <dist_spec> object. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/646" class="external-link">#646</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</dist_spec></li>
<li>The functions <code><a href="../reference/sample_approx_dist.html">sample_approx_dist()</a></code>, <code><a href="../reference/report_cases.html">report_cases()</a></code>, and <code>adjust_infection_reports()</code> have been deprecated as the functionality they provide can now be achieved with <code><a href="../reference/simulate_secondary.html">simulate_secondary()</a></code>. See <a href="https://github.com/epiforecasts/EpiNow2/issues/597" class="external-link">#597</a> by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-5-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-5-0"></a></h3>
<ul><li>Two new vignettes have been added to cover the workflow and example uses. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/458" class="external-link">#458</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Removed references to the no longer existing <code>forecast_infections</code> function. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/460" class="external-link">#460</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>The contribution guide has been improved to include more detail on ways to contribute new features/enhancements, report bugs, and improve or suggest vignettes. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/464" class="external-link">#464</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Updated the code in <code>inst/CITATION</code> and added a GitHub Actions workflow to auto-generate <code>citation.cff</code> so that the two citation files are always in sync with <code>DESCRIPTION</code>. By <a href="https://github.com/jamesmbazam" class="external-link">@jamesmbazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/467" class="external-link">#467</a>, with contributions from <a href="https://github.com/Bisaloo" class="external-link">@Bisaloo</a>, and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a> and <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Updated the documentation of the <code>data</code> argument in <code><a href="../reference/estimate_infections.html">estimate_infections()</a></code> and <code>confirm</code> column in the <code>obs</code> argument of <code><a href="../reference/estimate_truncation.html">estimate_truncation()</a></code> to allow <code>numeric</code> types, not just <code>integer</code>. See <a href="https://github.com/epiforecasts/EpiNow2/issues/594" class="external-link">#594</a>, by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>, and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Removed the reporting templates that were previously provided. See <a href="https://github.com/epiforecasts/EpiNow2/issues/604" class="external-link">#604</a> by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>, and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Clarified how estimated or specified uncertainty around data truncation can be passed to <code><a href="../reference/epinow.html">epinow()</a></code>, <code><a href="../reference/regional_epinow.html">regional_epinow()</a></code>, and <code><a href="../reference/estimate_infections.html">estimate_infections()</a></code> using the <code>truncation</code> argument. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/644" class="external-link">#644</a> and reviewed by <a href="https://github.com/sbnfk" class="external-link">@sbnfk</a>.</li>
<li>Internal functions have been removed from the pkgdown index. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/735" class="external-link">#735</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="package-1-5-0">Package<a class="anchor" aria-label="anchor" href="#package-1-5-0"></a></h3>
<ul><li>Replaced use of <code><a href="https://purrr.tidyverse.org/reference/transpose.html" class="external-link">purrr::transpose()</a></code> with <code><a href="https://purrr.tidyverse.org/reference/list_transpose.html" class="external-link">purrr::list_transpose()</a></code> because the former is superseded. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/524" class="external-link">#524</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Reduced the number of long-running examples. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/459" class="external-link">#459</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Changed all instances of arguments that refer to the maximum of a distribution to reflect the maximum. Previously this did, in some instance, refer to the length of the PMF. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/468" class="external-link">#468</a>.</li>
<li>Fixed a bug in the bounds of delays when setting initial conditions. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/474" class="external-link">#474</a>.</li>
<li>Added input checking to <code><a href="../reference/estimate_infections.html">estimate_infections()</a></code>, <code><a href="../reference/estimate_secondary.html">estimate_secondary()</a></code>, <code><a href="../reference/estimate_truncation.html">estimate_truncation()</a></code>, <code><a href="../reference/simulate_infections.html">simulate_infections()</a></code>, and <code><a href="../reference/epinow.html">epinow()</a></code>. <code><a href="../reference/check_reports_valid.html">check_reports_valid()</a></code> has been added to validate the reports dataset passed to these functions. Tests are added to check <code><a href="../reference/check_reports_valid.html">check_reports_valid()</a></code>. As part of input validation, the various <code>*_opts()</code> functions now return subclasses of the same name as the functions and are tested against passed arguments to ensure the right <code>*_opts()</code> is passed to the right argument. For example, the <code>obs</code> argument in <code><a href="../reference/estimate_secondary.html">estimate_secondary()</a></code> is expected to only receive arguments passed through <code><a href="../reference/obs_opts.html">obs_opts()</a></code> and will error otherwise. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/476" class="external-link">#476</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> and <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added the possibility of specifying a fixed observation scaling. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/550" class="external-link">#550</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added the possibility of specifying fixed overdispersion. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/560" class="external-link">#560</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>The example in <code><a href="../reference/estimate_truncation.html">estimate_truncation()</a></code> has been simplified. The package now ships with a dataset <code>example_truncated</code>, which is used in the <code><a href="../reference/estimate_truncation.html">estimate_truncation()</a></code> example and tests. The steps for creating the <code>example_truncated</code> is stored in <code>./data-raw/estimate-truncation.R</code>. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/584" class="external-link">#584</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a> and <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Tests have been updated to only set random seeds before snapshot tests involving random number generation, and unset them subsequently. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/590" class="external-link">#590</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>A function <code><a href="../reference/simulate_secondary.html">simulate_secondary()</a></code> was added to simulate from parameters of the <code>estimate_secondary</code> model. A function of the same name that was previously based on a reimplementation of that model in R with potentially time-varying scalings and delays has been renamed to <code><a href="../reference/convolve_and_scale.html">convolve_and_scale()</a></code>. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/591" class="external-link">#591</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Fixed broken links in the README. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/617" class="external-link">#617</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Replaced descriptions and plot labels to be more general and clearer. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/621" class="external-link">#621</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Argument choices have been moved into default arguments. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/622" class="external-link">#622</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>
<code><a href="../reference/simulate_infections.html">simulate_infections()</a></code> gained the argument <code>seeding_time</code> to change the seeding time. Additionally, the documentation was improved. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/627" class="external-link">#627</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>A <code>cmdstanr</code> backend has been added. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/537" class="external-link">#537</a> and <a href="https://github.com/epiforecasts/EpiNow2/issues/642" class="external-link">#642</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="model-changes-1-5-0">Model changes<a class="anchor" aria-label="anchor" href="#model-changes-1-5-0"></a></h3>
<ul><li>Updated the parameterisation of the dispersion term <code>phi</code> to be <code>phi = 1 / sqrt_phi ^ 2</code> rather than the previous parameterisation <code>phi = 1 / sqrt(sqrt_phi)</code> based on the suggested prior <a href="https://github.com/stan-dev/stan/wiki/Prior-Choice-Recommendations#story-when-the-generic-prior-fails-the-case-of-the-negative-binomial" class="external-link">here</a> and the performance benefits seen in the <code>epinowcast</code> package (see <a href="https://github.com/epinowcast/epinowcast/blob/8eff560d1fd8305f5fb26c21324b2bfca1f002b4/inst/stan/epinowcast.stan#L314" class="external-link">here</a>). By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/487" class="external-link">#487</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Added an <code>na</code> argument to <code><a href="../reference/obs_opts.html">obs_opts()</a></code> that allows the user to specify whether NA values in the data should be interpreted as missing or accumulated in the next non-NA data point. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/534" class="external-link">#534</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Growth rates are now calculated directly from the infection trajectory as <code>log I(t) - log I(t - 1)</code>. Originally by <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/213" class="external-link">#213</a>, finished by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/610" class="external-link">#610</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Fixed a bug when using the nonmechanistic model that could lead to explosive growth. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/612" class="external-link">#612</a> and reviewed by <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a>.</li>
<li>Added the arguments <code>filter_leading_zeros</code> and <code>zero_threshold</code> to <code><a href="../reference/estimate_secondary.html">estimate_secondary()</a></code> and <code><a href="../reference/estimate_truncation.html">estimate_truncation()</a></code> to allow the user to specify whether to filter leading zeros in the data and the threshold for replacing zero cases. These arguments were already used in <code><a href="../reference/estimate_infections.html">estimate_infections()</a></code>, <code><a href="../reference/epinow.html">epinow()</a></code>, and <code><a href="../reference/regional_epinow.html">regional_epinow()</a></code>. See <code><a href="../reference/estimate_secondary.html">?estimate_secondary</a></code> and <code><a href="../reference/estimate_truncation.html">?estimate_truncation</a></code> for more details. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/608" class="external-link">#608</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.0" id="epinow2-140">EpiNow2 1.4.0<a class="anchor" aria-label="anchor" href="#epinow2-140"></a></h2><p class="text-muted">CRAN release: 2023-09-26</p>
<p>This release contains some bug fixes, minor new features, and the initial stages of some broader improvement to future handling of delay distributions.</p>
<div class="section level3">
<h3 id="breaking-changes-1-4-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-4-0"></a></h3>
<ul><li>The external distribution interface has been updated to use the <code><a href="../reference/dist_spec.html">dist_spec()</a></code> function. This comes with a range of benefits, including optimising model fitting when static delays are used (by convolving when first defined vs in stan), easy printing (using <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>), and easy plotting (using <code><a href="../reference/plot.estimate_infections.html">plot()</a></code>). It also makes it possible to use all supported distributions everywhere (i.e, as a generation time or reporting delay). However, while for now backwards compatibility has been ensured this update will break most users‚Äô code eventually as the interface has changed. See the documentation for <code><a href="../reference/dist_spec.html">dist_spec()</a></code> for more details. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/363" class="external-link">#363</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="package-1-4-0">Package<a class="anchor" aria-label="anchor" href="#package-1-4-0"></a></h3>
<ul><li>Model description has been expanded to include more detail. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/373" class="external-link">#373</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Moved to a GitHub Action to only lint changed files. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/378" class="external-link">#378</a>.</li>
<li>Linted the package with a wider range of default linters. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/378" class="external-link">#378</a>.</li>
<li>Added a GitHub Action to build the README when it is altered. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added handling of edge case where we sample from the negative binomial with mean close or equal to 0. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/366" class="external-link">#366</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Replaced use of nested <code><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse()</a></code> and <code><a href="https://rdatatable.gitlab.io/data.table/reference/fifelse.html" class="external-link">data.table::fifelse()</a></code> in the code base with <code><a href="https://rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">data.table::fcase()</a></code>. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/383" class="external-link">#383</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Reviewed the example in <code>calc_backcalc_data()</code> to call <code>calc_backcalc_data()</code> instead of <code><a href="../reference/create_gp_data.html">create_gp_data()</a></code>. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/388" class="external-link">#388</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Improved compilation times by reducing the number of distinct stan models and deprecated <code>tune_inv_gamma()</code>. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/394" class="external-link">#394</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Changed touchstone settings so that benchmarks are only performed if the stan model is changed. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/400" class="external-link">#400</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>
<a href="https://pak.r-lib.org/" class="external-link">pak</a> is now suggested for installing the developmental version of the package. By <a href="https://github.com/jamesmbaazam" class="external-link">@jamesmbaazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/407" class="external-link">#407</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>. This has been successfully tested on MacOS Ventura, Ubuntu 20.04, and Windows 10. Users are advised to use <code>remotes::install_github("epiforecasts/EpiNow2")</code> if <code>pak</code> fails and if both fail, raise an issue.</li>
<li>
<code><a href="../reference/dist_fit.html">dist_fit()</a></code>‚Äôs <code>samples</code> argument now takes a default value of 1000 instead of NULL. If a supplied <code>samples</code> is less than 1000, it is changed to 1000 and a warning is thrown to indicate the change. By <a href="https://github.com/jamesmbazam" class="external-link">@jamesmbazam</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/389" class="external-link">#389</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>The internal distribution interface has been streamlined to reduce code duplication. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/363" class="external-link">#363</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>A small bug has been fixed where the seeding time was too long. When a single delay is used this shortens the seeding time by one day and when more delays are used it shortens the seeding time by n days where n is the number of delays used e.g.¬†for two parametric delays it‚Äôs two days. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/413" class="external-link">#413</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Some tuning was done to speed up the renewal model. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/416" class="external-link">#416</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>An approximation of the negative binomial by the Poisson at low levels of overdispersion was disabled as it led to parameter identification issues. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/432" class="external-link">#432</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Reduced verbosity of tests. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/433" class="external-link">#433</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Updated code style in response to lintr warnings. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/437" class="external-link">#437</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Fixed an edge case breaking summary output. Reported by <a href="https://github.com/jrcpulliam" class="external-link">@jrcpulliam</a>, fixed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/436" class="external-link">#436</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added content to the vignette for the estimate_truncation model. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/439" class="external-link">#439</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added a feature to the <code>estimate_truncation</code> to allow it to be applied to time series that are shorter than the truncation max. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/438" class="external-link">#438</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Changed the <code>estimate_truncation</code> to use the <code>dist_spec</code> interface, deprecating existing options <code>max_trunc</code> and <code>trunc_dist</code>. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/448" class="external-link">#448</a> and <a href="https://github.com/epiforecasts/EpiNow2/issues/452" class="external-link">#452</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added a <code>weigh_delay_priors</code> argument to the main functions, allowing the users to choose whether to weigh delay priors by the number of data points or not. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/450" class="external-link">#450</a> and reviewed by <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-4-0">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-4-0"></a></h3>
<ul><li>Added a link to the recent CSTE workshop on using <code>EpiNow2</code> to the case studies vignette. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/441" class="external-link">#441</a> and reviewed by <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.5" id="epinow2-135">EpiNow2 1.3.5<a class="anchor" aria-label="anchor" href="#epinow2-135"></a></h2><p class="text-muted">CRAN release: 2023-04-27</p>
<p>This is a minor release to resolve issues with the recent CRAN requirement to make use of a C++ 17 compiler which has been causing <a href="https://github.com/stan-dev/rstantools/pull/100" class="external-link">issues with the <code>rstantools</code> package</a>.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.4" id="epinow2-134">EpiNow2 1.3.4<a class="anchor" aria-label="anchor" href="#epinow2-134"></a></h2><p class="text-muted">CRAN release: 2023-02-12</p>
<p>This release focusses on bug fixes and package infrastructure updates along with a few quality of life improvements such as enabling the use of fixed delays and generation times.</p>
<p>Thanks to <a href="https://github.com/seabbs" class="external-link">@seabbs</a>, and <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> and for the South African Centre for Epidemiological Modelling and Analysis (SACEMA) for hosting <a href="https://github.com/seabbs" class="external-link">@seabbs</a> whilst some of the development work on this release was being done.</p>
<div class="section level3">
<h3 id="breaking-changes-1-3-4">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-3-4"></a></h3>
<ul><li>To streamline the interface with the definition of delay distributions <code><a href="../reference/trunc_opts.html">trunc_opts()</a></code> now takes a single argument (<code>dist</code>) which defines the truncation delay rather than a arbitrary list of arguments (which was previously used to define the distribution).</li>
<li>Updated the handling of generation times in the renewal equation to be left truncation adjusted for the zeroth day. This more better the approach taken to estimate generation times but may slightly impact estimates vs those produced using previous versions.</li>
<li>The range of the <code>frac_obs</code> parameter has restricted with an upper bound of 1 to reflect its name and description. This may impact a small number of edge case uses with the majority being models fit using <code><a href="../reference/estimate_secondary.html">estimate_secondary()</a></code>. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/340" class="external-link">#340</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="features-1-3-4">Features<a class="anchor" aria-label="anchor" href="#features-1-3-4"></a></h3>
<ul><li>Adds a new function <code><a href="../reference/simulate_secondary.html">simulate_secondary()</a></code> for simulating secondary observations under the generative process model assumed by <code>estimate_secondary</code>. Unlike <code><a href="../reference/forecast_secondary.html">forecast_secondary()</a></code> which uses a <code>stan</code> model to simulate secondary cases (which shares code with the <code>estimate_secondary</code> model) this new function is implemented entirely in R and is therefore useful to sense check any results from the <code>stan</code> implementation.</li>
<li>Adds support for fixed delays (mean only or fixed lognormal distributed) or truncations (fixed lognormal distributed), and for pre-computing these delays as well as generation times if they are fixed. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> and <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Support for gamma distributed delays and log-normal distributed generation times.</li>
</ul></div>
<div class="section level3">
<h3 id="package-1-3-4">Package<a class="anchor" aria-label="anchor" href="#package-1-3-4"></a></h3>
<ul><li>Update the GitHub Action files to new versions.</li>
<li>Switched to using <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along()</a></code> rather than <code>1:length()</code> in all package code.</li>
<li>Fixed a broken example in the documentation for <code><a href="../reference/regional_runtimes.html">regional_runtimes()</a></code>.</li>
<li>Add compatibility changes for the latest version of <code>rstan</code> and <code>rstantools</code>.</li>
<li>Remove legacy use of <code>pkgnet</code> for package dependency visualisation.</li>
<li>Restyled all code using <code>styler</code>.</li>
<li>Dropped dependency on <code>RcppParallel</code>.</li>
<li>Updated <code>report_cases</code> to work with the new <code>delay_opts</code> helper function.</li>
<li>Added test coverage for <code>report_cases</code> though note this function will likely be deprecated in future releases.</li>
<li>Switched to <code>linewidth</code> in <code>plot_CrIs</code> rather than <code>size</code> to avoid issues with <code>ggplot2</code> 3.4.0.</li>
<li>Set up validation against synthetic data to run as a CI check.</li>
<li>Added tests for internal stan convolution functions.</li>
<li>Update all <code>get_</code> distribution functions to return the distribution as well as summary parameters.</li>
<li>Added support for model fitting benchmarking using <code>touchstone</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-3-4">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-3-4"></a></h3>
<ul><li>Slight edits to the model outline for <code><a href="../reference/estimate_infections.html">estimate_infections()</a></code>.</li>
<li>Updated examples to make use of fixed distributions.</li>
</ul></div>
<div class="section level3">
<h3 id="bugs-1-3-4">Bugs<a class="anchor" aria-label="anchor" href="#bugs-1-3-4"></a></h3>
<ul><li>Fixed a bug in <code><a href="../reference/simulate_infections.html">simulate_infections()</a></code> where passing a custom number of samples would cause the input vector of R values to be replicated in a column-wise fashion meaning that the intended R trajectory was not simulated.</li>
<li>Fixed a bug in the <code><a href="../reference/estimate_infections.html">estimate_infections()</a></code> deconvolution model where the generation time was not correctly being reversed.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.3" id="epinow2-133">EpiNow2 1.3.3<a class="anchor" aria-label="anchor" href="#epinow2-133"></a></h2>
<p>This release adds a range of new minor features, squashes bugs, enhances documentation, expands unit testing, implements some minor run-time optimisations, and removes some obsolete features.</p>
<p>Thanks to <a href="https://github.com/Bisaloo" class="external-link">@Bisaloo</a>, <a href="https://github.com/hsbadr" class="external-link">@hsbadr</a>, <a href="https://github.com/LloydChapman" class="external-link">@LloydChapman</a>, <a href="https://github.com/medewitt" class="external-link">@medewitt</a>, and <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> for contributing to this release.</p>
<p>Thanks to <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>, <a href="https://github.com/pearsonca" class="external-link">@pearsonca</a>, and <a href="https://github.com/nicholasdavies" class="external-link">@nicholasdavies</a> for regression testing this release against <code>1.3.2</code>.</p>
<div class="section level3">
<h3 id="new-features-1-3-3">New features<a class="anchor" aria-label="anchor" href="#new-features-1-3-3"></a></h3>
<ul><li>Added supported to <code>simulate_infections</code> so that a <code>data.frame</code> of R samples can be passed in instead of a vector of R values. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added extraction of posterior samples to the summary method for <code>estimate_infections</code>. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Exposed <code>zero_threshold</code> to users allowing for control over when zeros or NAs in count data are treated as true zeros versus as reporting errors that require some smoothing. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added support for varying the length of the day of the week effect (see <code><a href="../reference/obs_opts.html">obs_opts()</a></code>). This allows, for example, fitting to data with cases only reported every 3 days. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Adds option to <code><a href="../reference/plot_estimates.html">plot_estimates()</a></code> and higher level functions to choose which estimate type to plot. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Adds support for fixed generation times (either mean only or fixed gamma distributed). By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Adds support for optionally using an inverse gamma prior for the lengthscale of the gaussian process. This scaled prior has been tested for both short and long simulations where the default prior may make the model unstable. The new prior is more stable for long simulations and adaptively change the distribution based on the simulation length (total number of days) without relying on the user inputs or the fixed defaults. It can be tested by setting ls_sd = 0 in gp_opts(). By <a href="https://github.com/hsbadr" class="external-link">@hsbadr</a>.</li>
<li>Updated the prior on the magnitude of the gaussian process to be 0.05 vs 0.1 leading to slightly more stable estimates. By <a href="https://github.com/hsbadr" class="external-link">@hsbadr</a>.</li>
<li>Added an argument (<code>plot</code>) to <code>regional_summary</code> to allow plotting to be optional. Closes <a href="https://github.com/epiforecasts/EpiNow2/issues/250" class="external-link">#250</a>. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/317" class="external-link">#317</a></li>
</ul></div>
<div class="section level3">
<h3 id="model-changes-1-3-3">Model changes<a class="anchor" aria-label="anchor" href="#model-changes-1-3-3"></a></h3>
<ul><li>Added support for varying the length of the day of the week effect (see <code><a href="../reference/obs_opts.html">obs_opts()</a></code>). This allows, for example, fitting to data with cases only reported every 3 days.</li>
<li>Minor optimisations in the observation model by only using the <code>target</code> likelihood definition approach when required and in the use of <code>fmax</code> and <code>fmin</code> over using if statements. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added support for users setting the overdispersion (parameterised as one over the square root of phi) of the reporting process. This is accessible via the <code>phi</code> argument of <code>obs_opts</code> with the default of a normal distribution with mean 0 and standard deviation of 1 truncated at 0 remaining unchanged. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added additive noise term to the <code>estimate_truncation</code> model to deal with zeroes. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Switched to using optimised versions of the discretised distributions supported for the reporting delay and the generation time. These are based on an implementation in <a href="https://package.epinowcast.org/" class="external-link"><code>epinowcast</code></a> by Adrian Lison and Sam Abbott. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/320" class="external-link">#320</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="documentation-1-3-3">Documentation<a class="anchor" aria-label="anchor" href="#documentation-1-3-3"></a></h3>
<ul><li>Updates to all synthetic delays to reduce runtime of examples. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Additional statements to make it clear to users examples should be used for real world analysis. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Additional context in the README on package functionality. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Added some work in progress model definitions and a resource list for case studies using the package. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
</ul></div>
<div class="section level3">
<h3 id="package-changes-1-3-3">Package changes<a class="anchor" aria-label="anchor" href="#package-changes-1-3-3"></a></h3>
<ul><li>Added a <code>contributing.md</code> to guide contributors and added <code>pre-commit</code> support to check new contributions styling. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Better test skipping thanks to <a href="https://github.com/Bisaloo" class="external-link">@Bisaloo</a>.</li>
<li>Switched from <code>cowplot::theme_cowplot()</code> to <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">ggplot2::theme_bw()</a></code>. This allows the removal of <code>cowplot</code> as a dependency as well making plots visible for users saving as pngs and using a dark theme. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>By default <code>epinow</code> and downstream functions remove leading zeros. Now this is optional with the new <code>filter_leading_zeros</code> option. Thanks to <a href="https://github.com/LloydChapman" class="external-link">@LloydChapman</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/285" class="external-link">#285</a>.</li>
<li>Basic tests have been added to cover <code><a href="../reference/estimate_secondary.html">estimate_secondary()</a></code>, <code><a href="../reference/forecast_secondary.html">forecast_secondary()</a></code>, and <code><a href="../reference/estimate_truncation.html">estimate_truncation()</a></code>. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/315" class="external-link">#315</a>.</li>
<li>Add basic snapshot tests for <code>adjust_infection_to_report</code>. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/316" class="external-link">#316</a>.</li>
<li>Update to use <code>rstantools</code> to manage compiler flags.</li>
<li>Update the Dockerfile to work better with vscode.</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-1-3-3">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-1-3-3"></a></h3>
<ul><li>Updated the classification of growth to use stable rather than unsure when Rt is approximately 1. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>The default parallisation has been changed to <code><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">future::multisession()</a></code> from <code>future::multiprocess()</code> as the latter is being depreciated in the <code>future</code> package. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a> and <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Ensure the seeding time is at least the maximum generation time (<a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-features-1-3-3">Deprecated features<a class="anchor" aria-label="anchor" href="#deprecated-features-1-3-3"></a></h3>
<ul><li>
<code>simulate_cases()</code> and <code><a href="../reference/simulate_infections.html">simulate_infections()</a></code> have been deprecated and have been removed. These functions depend on <code>EpiSoon</code> which itself is archived and near equivalent functionality is available within <code>EpiNow2</code> and in other packages (<a href="https://github.com/seabbs" class="external-link">@seabbs</a>).</li>
<li>Functions supporting secondary forecasting using <code><a href="../reference/simulate_infections.html">simulate_infections()</a></code> (i.e in `epinow()) have been removed along with the arguments that supported them (<a href="https://github.com/seabbs" class="external-link">@seabbs</a>).</li>
<li>
<code>global_map()</code>, <code>country_map()</code>, and <code>theme_map()</code> have all been deprecated and have been removed. These functions were used to support reporting of reproduction number estimates and are considered out of scope for <code>EpiNow2</code>. If finding useful contacting the <code>EpiNow2</code> developers (<a href="https://github.com/seabbs" class="external-link">@seabbs</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-3-3">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-3-3"></a></h3>
<ul><li>Fixed a bug in the deconvolution Rt estimation method where the mean of the generation time was being used as the standard deviation. For the default package generation time these are close and so the impact will be limited but in cases where the standard deviation is &lt;&lt; than the mean this should result in more accurate Rt estimates. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Fixed a bug where the number of threads used by the data.table package were set to one in the global environment. Now the number of threads used by data.table are set to whatever the used specified on exit. By <a href="https://github.com/medewitt" class="external-link">@medewitt</a>.</li>
<li>Fixed a bug in <code>simulate_infections</code> and <code>forecast_secondary</code> which meant that a Poisson observation model used for estimation would lead to a error. By <a href="https://github.com/seabbs" class="external-link">@seabbs</a>.</li>
<li>Fixed a bug where <code>use_rt = FALSE</code> did not properly cancel user settings. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Fixed a bug in <code>estimate_truncation</code> where phi was not initialised. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>.</li>
<li>Fixed a bug where <code>zero_threshold</code> was being ignored and so no post-processing was happening. To maintain backwards compatibility the default has been changed to <code>Inf</code> (i.e.¬†no zero threshold). By <a href="https://github.com/LloydChapman" class="external-link">@LloydChapman</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/285" class="external-link">#285</a>.</li>
<li>Fixed a bug where setting <code>obs_opts(return_likelihood = TRUE)</code> fails. By <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> in <a href="https://github.com/epiforecasts/EpiNow2/issues/333" class="external-link">#333</a>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.2" id="epinow2-132">EpiNow2 1.3.2<a class="anchor" aria-label="anchor" href="#epinow2-132"></a></h2><p class="text-muted">CRAN release: 2020-12-14</p>
<p>In this release model run times have been reduced using a combination of code optimisation and testing to reduce the likelihood of long running edge cases. Model flexibility has also been increased, particularly for the back calculation approach which now supports an increased range of prior choices. A significant development in this release is the edition of the experimental <code>estimate_secondary</code> model (and supporting <code>forecast</code> and <code>plot</code> functions). This allows a downstream target to be forecast from an observation. Example use cases include forecasting deaths from test positive cases and hospital bed usage from hospital admissions. This approach is intended to provide an alternative to models in which multiple targets are estimated jointly.</p>
<div class="section level3">
<h3 id="new-features-1-3-2">New features<a class="anchor" aria-label="anchor" href="#new-features-1-3-2"></a></h3>
<ul><li>Added a new argument, <code>prior</code>, to <code><a href="../reference/backcalc_opts.html">backcalc_opts()</a></code>. This allows the use of different priors for the underlying latent infections when estimating using deconvolution/back-calculation rather than the package default of using a generated Rt model (enable this option by setting <code>rt = NULL</code>). The default prior remains smoothed mean delay shifted reported cases but optionally no prior can now also be used (for scenarios when the data is very untrustworthy but likely to perform extremely poorly in real time).In addition, the previously estimated infections can be used (i.e infections[t] = infections[t-1] * exp(GP)) with this being an approximate version of the generative Rt model that does not weight previous infections using the generation time.</li>
<li>Updates the smoothing applied to mean shifted reported cases used as a prior for back calculation when <code>prior = "reports"</code> to be a partial centred moving average rather than a right aligned moving average. This choice means that increasing the <code>prior</code> window does not alter the location of epidemic peaks as when using a right alighted moving average.</li>
<li>Updates the default smoothing applied to mean shifted reported cases to be 14 days rather than 7 as usage indicates this provided too much weight to small scale changes. This remains user set able.</li>
<li>Adds a new argument <code>init_fit</code> to <code><a href="../reference/stan_opts.html">stan_opts()</a></code> that enables the user to pass in a <code>stanfit</code> to use to initialise a model fit in <code><a href="../reference/estimate_infections.html">estimate_infections()</a></code>. Optionally <code>init_fit = "cumulative"</code> can also be passed which first fits to cumulative data and then uses the result to initialise the full fit on incidence data. This approach is based on the approach used in <a href="https://github.com/ImperialCollegeLondon/epidemia/" class="external-link">epidemia</a> authored by James Scott. Currently <code>stan</code> warnings from this initial fit are broadcast to the user and may cause concern as the short run time and approximate settings often lead to poor convergence.</li>
<li>Adds <code>estimate_secondary</code> and <code>forecast_secondary</code> along with a <code>plot</code> method and a new option function (<code><a href="../reference/secondary_opts.html">secondary_opts()</a></code>). These functions implement a generic model for forecasting a secondary observation (such as hospital bed usage, deaths in hospital) that entirely depends on a primary observation (such as hospital admissions) via a combination of convolving over a delay and adding/subtracting current observations. They share the same observation model and optional features used by <code>estimate_infections</code> and so support data truncation, scaling (between primary and secondary observations), multiple log normal delays, a day of the week effect, and various error models. <code>stationary_opts()</code> allows for easy specification of the most common use cases (incidence and prevalence variables). See the documentation and examples for model details.</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-1-3-2">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-1-3-2"></a></h3>
<ul><li>Updates <code>discretised_gamma_pmf</code> (discretised truncated Gamma PMF) and <code>discretised_lognormal_pmf</code> (discretised truncated lognormal PMF) to limit/clip the values of the parameters by prespecified lower and upper bounds.</li>
<li>Tightens the initialisation of fitting in <code>estimate_infections</code> by reducing all standard deviations used by a scaling factor of 0.1 in <code>create_initial_conditions</code>.</li>
<li>Adds boundary checking on <code>gt_mean</code> (the mean of the generation time) to reject samples with a mean greater than <code>gt_max</code> (the maximum allowed generation time). Adds boundary checking to reject standard deviations that are negative. Adds a boundary check on R values to reject them if 10 times greater than the mean of the initial prior. In some scenarios this will require users to supply a prior not is not completely misspecified (i.e if the prior has a mean of 1 and the posterior has a mean of 50).<br></li>
<li>Refactor of <code>update_rt</code> (an internal <code>stan</code> function found in <code>inst/stan/functions/rt.stan</code>) to be vectorised. This change reduces run times by approximately 1- ~ 20% (though only tested on a small subset of examples) and opens the way for future model extensions (such as additive rather than multiplicative random walks, and introducing covariates).</li>
<li>Switched to reporting two significant figures in all summary tables</li>
<li>Reduced minimum default Gaussian process length scale to 3 days from 7 based on experience running the model at scale.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.1" id="epinow2-131">EpiNow2 1.3.1<a class="anchor" aria-label="anchor" href="#epinow2-131"></a></h2><p class="text-muted">CRAN release: 2020-11-22</p>
<p>This release focusses on model stability, with a functional rewrite of the model implementation, finalising the interface across the package, and introducing additional tooling. The additional tooling includes: support for adjusting for and estimating data truncation, multiple approaches for estimating Rt (including the default generative Rt approach, de-convolution coupled with Rt calculation, and <code>EpiEstim</code> like estimation on observed cases but with a robust observation model), optional scaling of observed data, and optional adjustment of future forecasts based on population susceptibility. The examples have also been expanded with links out to Covid-19 specific work flows that may be of interest to users. The implementation and model options are now considered to be maturing with the next release planned to contain documentation on the underlying approach, case studies, validation, evaluation the various supported options, and tools for dealing with secondary reports that are dependent on a primary report (i.e hospital admissions and hospital bed usage). If interested in contributing to any of these features please contact the package authors or submit a PR. User contributions are warmly welcomed.</p>
<div class="section level3">
<h3 id="new-features-1-3-1">New features<a class="anchor" aria-label="anchor" href="#new-features-1-3-1"></a></h3>
<ul><li>Rewritten the interface for <code>estimate_infections</code> to be divided into calls to <code>_opts()</code> functions. Options are now divided by type for delays (<code><a href="../reference/delay_opts.html">delay_opts()</a></code>), Rt (<code><a href="../reference/rt_opts.html">rt_opts()</a></code>), backcalculation (<code><a href="../reference/backcalc_opts.html">backcalc_opts()</a></code>), the Gaussian process (<code><a href="../reference/gp_opts.html">gp_opts()</a></code>), and stan arguments (<code><a href="../reference/stan_opts.html">stan_opts()</a></code>). This has resulted in a larger number of the arguments from <code>estimate_infections</code> being folded into the related <code>_opts()</code> function. Please see the function documentation and examples for details.</li>
<li>Added support for region specific settings for all arguments that take an <code>_opts()</code> function in <code>regional_epinow</code> using the helper functions <code>opts_list</code> and <code>update_list</code> or alternatively by constructing a named list with an entry for each region to be estimated.</li>
<li>Extended the functionality of the back calculation model so that Rt can be produced via calculation. These estimates are potentially less reliable than those produced using the generative model but the model can be estimated in a fraction of the time. In essence this is similar to using a back projection method and then estimating Rt using <a href="https://github.com/mrc-ide/EpiEstim" class="external-link">EpiEstim</a> (here with a default window of 1 but this can be updated using <code>backcalc_opts(rt_window))</code> but this approaches incorporates uncertainty from all inputs in a single estimate.</li>
<li>Reduced the default maximum generation time and incubation period allowed in the truncated distribution (from 30 days to 15). This decreases the model run time substantially at a marginal accuracy cost. This new default is not suitable for longer generation times and should be modified by the user if these are used.</li>
<li>Adds basic S3 plot and summary measures for <code>epinow</code> and <code>estimate_infections</code>.</li>
<li>Updates the initialisation of the generative Rt model (the default) so that initial infections that occur in unobserved time (i.e before the first reported case) are generated using an exponential growth model with priors based on fitting the same model to the first week of data. This replaces the previous approach which was to use delay shifted reported cases multiplied by independent noise terms. It reduces degrees of freedom and fitting time at the cost of some model flexibility. Alternatives such as using the generative Rt model were considered but ultimately these approaches were not used as they introduced spurious variation to the gaussian process and result in unreliable Rt estimates due to the lack of historic infections.</li>
<li>New <code>simulate_infections</code> function from <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a> which allows the simulation of different Rt traces when combined with estimates as produced by <code>estimate_infections</code>. This function is likely to form the basis for moving all forecasting out of <code>estimate_infections</code> which may improve model stability.</li>
<li>Updates the implementation of the Gaussian process to support the Matern 3/2 Kernel (and set this as the default) in addition to the squared exponential kernel. Updates the handling of Gaussian process arguments so that only overridden settings need to be passed by the user when making changes. Settings are now defined, and documented, in <code><a href="../reference/gp_opts.html">gp_opts()</a></code>. The length scale is now defined using a log normal truncated prior with a mean of 21 days and a standard deviation of 7 days truncated at 3 days and the length of the data by default. This prior is an area of active research and so may change in future releases.</li>
<li>Updates the over dispersion prior to be <code>1 / sqrt(half_normal(0, rho_prior))</code> based on <a href="https://github.com/stan-dev/stan/wiki/Prior-Choice-Recommendations" class="external-link">this</a> advice and as the over dispersion being measured is in reports and not infections and hence a priori there is not strong evidence for over dispersion (which may be the case for infections) so the previous prior was overly weighted towards this.</li>
<li>Updates the interface for the observation model with arguments now passed using <code><a href="../reference/obs_opts.html">obs_opts()</a></code>. This removes <code>week_effect</code> and <code>family</code> from the main argument list which will allow for future extensions. Also adds a new argument <code>scale</code> which controls the uncertain fraction of cases that are eventually observed (defined as normally distributed). Setting this parameter will not impact Rt estimates.</li>
<li>Updates the interface to the Rt settings with all arguments passed via <code>rt</code>, using <code><a href="../reference/rt_opts.html">rt_opts()</a></code>, this includes the initial prior,<code>use_breakpoints</code>, and <code>future</code>. Adds a new helper argument <code>rw</code> which enables easy parameterisation of a fixed length random walk. These changes also help make it clear that these arguments only impact the Rt generative model and not the back calculation model.</li>
<li>Adds an adjustment for population susceptibility based on that used in <a href="https://github.com/ImperialCollegeLondon/epidemia" class="external-link"><code>{epidemia}</code></a> when Rt is fixed into the future (set by passing a population to <code>rt_opts(pop = initial susceptible population)</code>. Note this only impacts case forecasts and not output Rt estimates and only impacts estimates at all beyond the forecast horizon as those based on data already account for population susceptibility by definition. The impact of this assumption can be explored using <code>simulate_infections</code> (by updating <code>est$arg$pop</code> in the example).</li>
<li>Adds <code>truncation</code> as a new argument to <code>estimate_infections</code> and higher level functions. This takes output from <code><a href="../reference/trunc_opts.html">trunc_opts()</a></code> and allows for internally adjusting observed cases for truncation. A new method <code>estimate_truncation</code> has also been added to support estimating a log normal truncation distribution from archived versions of the same data set though this method is currently experimental.</li>
<li>Adds <code>estimate_delay</code> as a user friendly wrapper around <code>bootstrapped_dist_fit</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-1-3-1">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-1-3-1"></a></h3>
<ul><li>Recoded the core stan model to be functional with the aim of making the code modular and extendable.</li>
<li>Added unit tests for the internal stan update_rt function.</li>
<li>Reworked the package logging system to improve the reporting of issues both in <code>epinow</code> and in <code>regional_epinow</code> for large batch runs.</li>
<li>Fix from <a href="https://github.com/hsbadr" class="external-link">@hsbadr</a> to prevent overflow when overdispersion is larger (by switching to a Poisson approximation). Hitting this issue may indicate a bug in other model code that will need further work to explore.</li>
<li>Moved default verbosity for all functions (excepting <code>regional_epinow</code>) to be based on whether or not usage is interactive.</li>
<li>Removed the <code>burn_in</code> argument of <code>estimate_infections</code> as updates to model initialisation mean that this feature is likely no longer needed. Please contact the developers if you feel you have a use case for this argument.</li>
<li>Adds utility functions to map between mean and standard deviation and the log mean and log standard deviation for a log normal distribution (<code>convert_to_logmean</code> and <code>convert_to_logsd</code>).</li>
<li>Optimised all discrete probability mass functions to be as vectorised as possible.</li>
<li>Updated the Gaussian process to be internally on the unit scale.</li>
<li>Added a new function, <code>expose_stan_fns</code> that exposes the internal stan functions into R. The enables unit testing, exploration of the stan functionality and potentially within R use cases for these functions.</li>
<li>Updates the default <code>warmup</code> to be 250 samples and the default <code>adapt_delta</code> to be 0.98.</li>
<li>Adds a pooling parameter for the standard deviation of breakpoint effects.</li>
<li>Updated all documentation and added <a href="https://lifecycle.r-lib.org/" class="external-link">lifecycle</a> badges to all functions to indicate development stage.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.2.1" id="epinow2-121">EpiNow2 1.2.1<a class="anchor" aria-label="anchor" href="#epinow2-121"></a></h2><p class="text-muted">CRAN release: 2020-10-20</p>
<p>This release introduces multiple breaking interface changes. Please see the README for examples of the new interface. It adds a range of quality of life improvements including updating the <code>stan</code> interface to support fitting each chain independently and offering variational inference as an alternative, experimental, fitting option. Notably it also adds support for nesting logging and a parallel enabled progress bar via the <code>progressr</code> package. Minor bugs have been fixed in the core model implementation focussing on stability and several already implemented features have been extended. Major model developments are planned for the next release of <code>EpiNow2</code>.</p>
<div class="section level3">
<h3 id="new-features-1-2-1">New features<a class="anchor" aria-label="anchor" href="#new-features-1-2-1"></a></h3>
<ul><li>Added support for either NUTs sampling (<code>method = "exact"</code>) or Variational inference (<code>method = "approximate"</code>).</li>
<li>Update the prior on the initial Rt estimate to be lognormal rather than gamma distributed. For users the interface remains unchanged but this parameterisation should be more numerically stable.</li>
<li>Added <code>get_dist</code>, <code>get_generation_time</code>, <code>get_incubation_period</code> based on ideas from <a href="https://github.com/pearsonca" class="external-link">@pearsonca</a>. (This leads to breaking changes with the removal of <code>covid_generation_times</code> and <code>covid_incubation_periods</code>).</li>
<li>Added <code>setup_logging</code> to enable users to specify the level and location of logging (wrapping functionality from <code>futile.logger</code>). Also added <code>setup_default_logging</code> to give users sensible defaults and embedded this function in <code>regional_epinow</code> and <code>epinow</code>.</li>
<li>Added <code>setup_future</code> to making using nested futures easier (required when using <code>future = TRUE</code>).</li>
<li>Implemented progress bar support using <code>progressr</code>.</li>
<li>Added timeout and timing option to <code>regional_epinow</code>
</li>
<li>Improved logging of warnings in <code>regional_epinow</code>
</li>
<li>Enabled the user to specify the credible intervals desired with 20%, 50% and 90% calculated by default. Also switched from high density regions to quantiles. Custom credible intervals are now supported in all reporting and plotting functions.</li>
<li>Added mean and sd to all reporting summaries.</li>
<li>Added a summary of the growth rate and doubling time.</li>
<li>Added a new function <code>regional_runtimes</code> that summarises the run time across regions.</li>
<li>Updated the <code>estimate_infections</code> interface and expanded the range of options for the <code>future_rt</code> argument. Users can now choose to set Rt from any time point referenced to the forecast date.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-2-1">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-2-1"></a></h3>
<ul><li>Fixed y axis max for <code>plot_summary</code>.</li>
<li>Fix to normalisation of delay and generation time distributions from <a href="https://github.com/sbfnk" class="external-link">@sbfnk</a>. This will impact nowcast infections but not reproduction number estimate.</li>
<li>Updated <code>discretised_gamma_pmf</code> (discretised truncated Gamma PMF) to constrain gamma shape and (inverse) scale parameters to be positive and finite (<code>alpha &gt; 0</code> and <code>beta &gt; 0</code>).</li>
<li>Fixed <code>readLines</code> incomplete final line warnings.</li>
<li>Fix from <a href="https://github.com/medewitt" class="external-link">@medewitt</a> from the internal <code>fit_chain</code> function where an interaction between <code>rstan</code> and timing out may have introduced an exception that caused whole regions to fail. This did not show on current unit tests or exploration using examples indicating a gap in testing.</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-1-2-1">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-1-2-1"></a></h3>
<ul><li>Updates the interface for specifying how output is returned.</li>
<li>Moved all inherited from stan arguments into <code>create_stan_args</code> with the option to override using <code>stan_args</code>. This leads to breaking changes - see the examples for details of the new interface.</li>
<li>Updated all example and documentation to reflect the new interface.</li>
<li>Added a <code>samples</code> argument to <code>get_regional_results</code> to make loading in samples optional. This also allows samples to be dropped when using <code>regional_epinow</code> which reduces RAM usage.</li>
<li>Cleaned up wrapper functions to move individual jobs into functions.</li>
<li>Adds testing of high level functions and some low level unit testing.</li>
<li>Adds a csv download button the interactive table in the regional summary table.</li>
<li>Makevars updated to remove the dependency on GNU Make by <a href="https://github.com/hsbadr" class="external-link">@hsbadr</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="epinow2-110">EpiNow2 1.1.0<a class="anchor" aria-label="anchor" href="#epinow2-110"></a></h2><p class="text-muted">CRAN release: 2020-09-01</p>
<ul><li>Implemented reporting templates</li>
<li>Bug fix of estimate reporting</li>
<li>Added additional reporting of runtime errors</li>
<li>Examples for <code>global_map</code> and <code>country_map</code> expanded by <a href="https://github.com/ellisp" class="external-link">@ellisp</a></li>
<li>Improved ISO code matching in <code>global_map</code> from <a href="https://github.com/ellisp" class="external-link">@ellisp</a></li>
<li>Improvements so that data frames and tibbles are supported as inputs.</li>
<li>Updated reporting templates</li>
<li>Updated reporting of estimates to clearly summarise cases by infection and report date.</li>
<li>Made all region summary plots optional.</li>
<li>Made reporting of decimal places more standardised across metrics.</li>
<li>README updated by <a href="https://github.com/kathsherratt" class="external-link">@kathsherratt</a></li>
<li>Logging added by <a href="https://github.com/joeHickson" class="external-link">@joeHickson</a></li>
<li>Updated plotting to be limited to a scaling of reported data (prevents upper CIs from skewing the plot).</li>
<li>Added uncertainty plot bounds to control y axis on plots for clarity purposes.</li>
<li>
<code>regional_summary</code> now saves input reported cases data <code>reported_cases.csv</code>.</li>
<li>Added an optional no delay model where Rt is estimated directly from the data. This option is not supported when using backcalculation only.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="epinow2-100">EpiNow2 1.0.0<a class="anchor" aria-label="anchor" href="#epinow2-100"></a></h2>
<ul><li>Rebased package from <a href="https://epiforecasts.io/EpiNow/" class="external-link">EpiNow</a>
</li>
<li>Implemented backcalculation, estimation, forecasting, and bootstrapped distribution fitting.</li>
<li>Added options to estimate the time-varying reproduction number using a Gaussian process (both stationary and non-stationary), combined with optional user supplied breakpoints. Alternatively a static reproduction number can be assumed which when combined with breakpoints becomes piecewise linear.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Joel Hellewell, Katharine Sherratt, Katelyn Gostic, Joe Hickson, Hamada S. Badr, Michael DeWitt, James M. Azam, EpiForecasts, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

